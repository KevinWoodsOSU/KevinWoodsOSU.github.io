<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
Design by TEMPLATED
http://templated.co
Released for free under the Creative Commons Attribution License

Name       : MetroBiz 
Description: A two-column, fixed-width design with dark color scheme.
Version    : 1.0
Released   : 20140207

-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900" rel="stylesheet" />
<link href="default.css" rel="stylesheet" type="text/css" media="all" />
<link href="fonts.css" rel="stylesheet" type="text/css" media="all" />

<!--[if IE 6]><link href="default_ie6.css" rel="stylesheet" type="text/css" /><![endif]-->

</head>
<body>
<div id="header-wrapper">
	<div id="header" class="container">
		<div id="logo">
			<h1><a href="#">Petfinder API: How-To Guide</a></h1>
			<span>Written by Kevin Woods</span>
		</div>
		<div id="menu">
			<ul>
				<li><a href="index.html" accesskey="1" title="">Introduction</a></li>
				<li><a href="settingUp.html" accesskey="2" title="">Setting Up</a></li>
				<li><a href="json.html" accesskey="3" title="">JSON</a></li>
				<li><a href="jquery.html" accesskey="4" title="">jQuery</a></li>
				<li class="current_page_item"><a href="apiRequest.html" accesskey="5" title="">API Request</a></li>
				<li><a href="dom" accesskey="4" title="">DOM</a></li>
			</ul>
		</div>
	</div>
</div>
<div id="wrapper2">
	<div id="welcome" class="container">
		<div class="title">
			<h2>The Moment We've All Been Waiting For</h2>
		</div>
		<p id="intropara">Now that we have an idea of what an API is, how to get your own API key, and how the data will be delivered,  
		we can finally make our first API request to Petfinder. We will be using <a href="https://jquery.com/">jQuery</a> to make this 
		request. For now we won't worry too much about the syntax of jQuery, however we will be discussing what jQuery is doing 
		and why we are using it in the <a href="jquery.html">next section</a>.
		</p>
	</div>
</div>
<div id="wrapper3">
	<div id="content">
	<h2 id="header2">Our First Request</h2>
	<p id="textcontent">Let's jump right into this and demonstrate our first request. This request will be asking Petfinder to return 
	basic information for a random pet in their database.
	<pre>
	$(document).ready(function() {
	var url = 'http://api.petfinder.com/pet.getRandom?key=yourKeyHere&output=basic&format=json'; 
	$.ajax({ 
	  type: 'GET', 
	  url: url + '&callback=?', 
	  dataType: 'json', 
	  success: function(data) { 
	    console.log(data);
	    var x = JSON.stringify(data) 
	    $(".output").html(x); 
	    } 
	  });
	});
	</pre>
						
	<p id="textcontent">This is the result of our API request. 
	<pre style="overflow: scroll">
	{"@encoding":"iso-8859-1","@version":"1.0","petfinder":{"pet":{"options":{"option":[{"$t":"hasShots"},{"$t":"altered"},{"$t":"housetrained"}]},"status":{"$t":"A"},"contact":{"phone":{"$t":"708 829 6013 "},"state":{"$t":"IL"},"address2":{},"email":{"$t":"catvandotnr@yahoo.com"},"city":{"$t":"Maywood"},"zip":{"$t":"60153"},"fax":{},"address1":{}},"age":{"$t":"Adult"},"size":{"$t":"M"},"media":{"photos":{"photo":[{"@size":"pnt","$t":"http://photos.petfinder.com/photos/pets/30089000/1/?bust=1408636210&width=60&-pnt.jpg","@id":"1"},{"@size":"fpm","$t":"http://photos.petfinder.com/photos/pets/30089000/1/?bust=1408636210&width=95&-fpm.jpg","@id":"1"},{"@size":"x","$t":"http://photos.petfinder.com/photos/pets/30089000/1/?bust=1408636210&width=500&-x.jpg","@id":"1"},{"@size":"pn","$t":"http://photos.petfinder.com/photos/pets/30089000/1/?bust=1408636210&width=300&-pn.jpg","@id":"1"},{"@size":"t","$t":"http://photos.petfinder.com/photos/pets/30089000/1/?bust=1408636210&width=50&-t.jpg","@id":"1"},{"@size":"pnt","$t":"http://photos.petfinder.com/photos/pets/30089000/2/?bust=1408636210&width=60&-pnt.jpg","@id":"2"},{"@size":"fpm","$t":"http://photos.petfinder.com/photos/pets/30089000/2/?bust=1408636210&width=95&-fpm.jpg","@id":"2"},{"@size":"x","$t":"http://photos.petfinder.com/photos/pets/30089000/2/?bust=1408636210&width=500&-x.jpg","@id":"2"},{"@size":"pn","$t":"http://photos.petfinder.com/photos/pets/30089000/2/?bust=1408636210&width=300&-pn.jpg","@id":"2"},{"@size":"t","$t":"http://photos.petfinder.com/photos/pets/30089000/2/?bust=1408636210&width=50&-t.jpg","@id":"2"}]}},"id":{"$t":"30089000"},"shelterPetId":{},"breeds":{"breed":[{"$t":"Domestic Long Hair"},{"$t":"Tortoiseshell"}]},"name":{"$t":"Goldfinger"},"sex":{"$t":"F"},"description":{"$t":"Goldfinger is a sweet and shy girl that is just beginning to come out of her shell. She seems to be quite intimidated by the high-activity foster home she is in, but in times of quiet she's proven herself to be incredibly sweet and not averse to TLC. In the right environment and with one-on-one caring attention, she would flourish into the incredible sweetheart that we've had glimpses of so far. If you want to meet this lovely girl to get an idea of what a sweetheart she is, make an appointment with CatVando! :)"},"mix":{"$t":"yes"},"shelterId":{"$t":"IL570"},"lastUpdate":{"$t":"2014-11-11T15:14:41Z"},"animal":{"$t":"Cat"}},"@xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","header":{"timestamp":{"$t":"2017-03-01T00:36:58Z"},"status":{"message":{},"code":{"$t":"100"}},"version":{"$t":"0.1"}},"@xsi:noNamespaceSchemaLocation":"http://api.petfinder.com/schemas/0.9/petfinder.xsd"}}
	</pre> 
	
	<p id="textcontent">This giant JSON string contains all of the desired information from our API request. We are able to see this because of the 
	<code>JSON.stringify(data)</code> function which turned the object sent to use by Petfinder into a JSON string. Unfortunately 
	this isn't very pleasant to look at. What we've also done in our code is log the object sent to use by Petfinder to the console.
	The console presents this data in a nice way like shown below.</p>
		
		<div><img src="consoleapireq.png" alt="consoleLog"></div>
	
	<p id="textcontent">You can access this by pressing F12 on any webpage and selecting the "console" tab at the top of the new window. I've already 
	expanded a few tabs to show the objects contained in the name "pet" and the string contained in the name "name". As explained in the <a href="json.html">previous section</a> 
	we can access this information by using the dot operator on data. In this case it will look like <code>data.petfinder.pet.name[$t]</code>.
	which will return the string "Goldfinger". This is the name of a random animal in Petfinder's database. All other values associated 
	with this JSON object will belong to the Goldfinger.
	</p>
	
	
	<h2 id="header2">Accessing Data from JSON</h2>
	<p id="textcontent">
	</p>
	
<p id="textcontent">One thing to remember when using dot notation is if there is a name with a space in your JSON object (ex. New York Style) then you will need to use bracket notation 
to access its value. Accessing New York Style toppings would look like <code>pizza["New York Style"].toppings[0]</code>.
</p>
<p id="textcontent">The last bit about handling JSON data is converting JavaScript to JSON and vice-versa. JavaScript has two built-in functions for handling these operations: 
<code>JSON.stringify</code> converts a JavaScript object to a JSON object and <code>JSON.parse</code> converts a JSON object to a JavaScript object. Here is an example of the 
<code>JSON.stringify</code> function on our pizza JSON object.
</p>
<div id="content"><iframe width="100%" height="300" src="//jsfiddle.net/Kwoods/uxux39cv/1/embedded/js,html,result/" allowfullscreen="allowfullscreen" frameborder="0"></iframe></div>
<p id="textcontent">All that the <code>JSON.stringify</code> function has done is wrap the names in the JavaScript object in quotation marks.</p>

	
	<div id="button"><a href="index - Copy.html">Next</a></div>
</div>
	
<div id="copyright" class="container">
	<p>&copy; Kevin Woods. All rights reserved. | CSS based on <a href="http://templated.co" rel="nofollow">TEMPLATED</a>.</p>
</div>
</body>
</html>
